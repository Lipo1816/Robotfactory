@page "/ESOPProcessMap"
@using DxBlazorApplication7.Data
@inject DataService DataService
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<style>

    .img {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -45%);
        width: 1920px;
        height: 840px;
        object-fit: scale-down;
    }

    .imgitem {
        position: absolute;
        top: 100px;
        left: 50px;
        width: 12px;
        height: 120px;
    }

</style>

<h3>ESOP Map</h3>

<img class="img" src="../images/map/process-map.jpg">

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 242px; left: 498px; width: 531px; height: 89px;">
    <div><span style="font-family:fantasy; font-size:larger;">ROBOT<div><span>CELL PROCESS</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 367px; left: 663px; width: 96px; height: 54px;">
    <div><span style="font-family:fantasy; font-size:larger;">IO<div><span>module</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 367px; left: 771px; width: 96px; height: 54px;">
    <div><span style="font-family:fantasy; font-size:larger;">BASE<div><span>module</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 242px; left: 1203px; width: 189px; height: 89px;">
    <div><span style="font-family:fantasy; font-size:larger;">ROBOT<div><span>CELL PROCESS</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 367px; left: 1227px; width: 132px; height: 54px;">
    <div><span style="font-family:fantasy; font-size:larger;">STICK<div><span>module</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 498px; left: 1227px; width: 132px; height: 54px;">
    <div><span style="font-family:fantasy; font-size:larger;">Control Box<div><span>module</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 714px; left: 651px; width: 108px; height: 78px;">
    <div><span style="font-family:fantasy; font-size:larger;">ROBOT<div><span>Assembly</span></div></span></div>
</button>

<button type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 714px; left: 824px; width: 117px; height: 78px;">
    <div><span style="font-family:fantasy; font-size:larger;">ROBOT<div><span>Control Box<div><span>Assembly</span></div></span></div></span></div>
</button>

@* <button class="dxbl-btn dxbl-btn-secondary" type="button" @onclick="@(() => GetESOP("S18_P18-1_9TM5A0-411-R02"))" style="position: absolute; top: 714px; left: 822px; width: 117px; height: 72px;">
    <div><span style="font-family:fantasy; font-size:larger;">ROBOT<div><span>Control Box<div><span>Assembly</span></div></span></div></span></div>
</button> *@

<DxPopup Width="1800px" Height="900px" HorizontalAlignment="HorizontalAlignment.Center" VerticalAlignment="VerticalAlignment.Center" @bind-Visible="@EsopPopupVisible"
         CloseOnEscape="false"
         CloseOnOutsideClick="false"
         ShowFooter="true"
         HeaderText="ESOP"
         BodyText="@_ESOPMsg">
    <BodyContentTemplate Context="PopupContext">
        @*<img class="fit-width" src="images/Techman Robot.png" style="height: 24%; width: 24%; float:right" align="bottom" />*@
        <div>
            <object data="@_ESOPData" type="application/pdf" width="1770" height="780"></object>
            @*<iframe src='../Uploads/S00/P00/M01/更新License.pdf' width="500" height="678"> </iframe>*@
        </div>
    </BodyContentTemplate>
    <FooterContentTemplate Context="Context">
        <DxButton CssClass="popup-button my-1 ms-2" RenderStyle="ButtonRenderStyle.Primary" Text="Close" Click="CloseEulaClick" />
        @*<DxButton CssClass="popup-button my-1 ms-2" RenderStyle="ButtonRenderStyle.Secondary" Text="Cancel" Click="CancelEulaClick" />*@
    </FooterContentTemplate>
</DxPopup>

@code {
    bool EsopPopupVisible { get; set; } = false;

    string _ESOPMsg;
    string _ESOPData;

    async Task GetESOP(string item)
    {
        _ESOPData = "../Uploads/S00/P00/M01/9TM999-411-R48(1) Standard Operation Procedure of IO Module(5.0x) assembly for TM5B,TMAB and TMBB.pdf";
        EsopPopupVisible = true;
    }

    async Task CloseEulaClick()
    {
        EsopPopupVisible = false;
    }
}
